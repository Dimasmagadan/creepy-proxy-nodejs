var breakpoint = 768;
var mobileZoom;
var fitAnalyticsOptions = {
    addToCart: false,
    showButton: false,
    showRecommendation: ""
};
var variant = {
    swapImage: false
};
var deferredFunction;

function initializeProductPage() {
    if ($(".previousZoomImageButton").length > 0 && $(".nextZoomImageButton").length > 0) {
        if ($(".previousZoomImageButton").html().trim() == "" || $(".nextZoomImageButton").html().trim() == "") {
            var e = $(".previousZoomImageButton");
            var o = $(".nextZoomImageButton");
            var t = $("<div></div>");
            var i = $("<div></div>");
            e.append(t);
            o.append(i);
            t.attr("id", "prevImg_On");
            i.attr("id", "nextImg_On")
        }
    }
    if (typeof kmo_wcs_pb$.getQuickView != "undefined" && kmo_wcs_pb$.getQuickView() || typeof kmo_wcs_pb$.getChangeView != "undefined" && kmo_wcs_pb$.getChangeView()) {
        var n = function() {
            initializeCarousel();
            initializeZoom()
        };
        var a = function() {
            $(".zoomContainer").remove();
            $(".zoomWindowContainer").remove();
            $(document).off("closed", "#popupContainer", a);
            $(document).off("opened", "#popupContainer", n)
        };
        $(document).on("opened", "#popupContainer", n);
        $(document).on("closed", "#popupContainer", a)
    } else if (typeof kmo_wcs_pb$.getTwoForOne != "undefined") {
        initializeCarousel("_1");
        initializeCarousel("_2");
        initializeZoom("_1");
        initializeZoom("_2")
    } else {
        initializeCarousel();
        initializeZoom();
        if ($("#crossSellRecommendation").length) {
            initializeCrossSellCarousel()
        }
    }
    $(window).resize(function() {
        if (mobileZoom && ($(window).width() > breakpoint && !(checkDevice.isMobile() && $(".zoomMagnifier") != undefined))) {
            $(".zoomContainer").remove();
            $(".zoomWindowContainer").remove();
            $("#productImage").removeData("elevateZoom");
            initializeDesktopZoom();
            mobileZoom = false
        } else if (!mobileZoom && ($(window).width() <= breakpoint || $(window).width() > breakpoint && checkDevice.isMobile() && $(".zoomMagnifier") != undefined)) {
            $(".zoomContainer").remove();
            $(".zoomWindowContainer").remove();
            $("#productImage").removeData("elevateZoom");
            $("#productImage").unbind("scroll");
            initializeMobileZoom();
            mobileZoom = true
        }
    });
    $(".productTabs").easyResponsiveTabs({
        type: "default",
        width: "auto",
        fit: true,
        closed: false
    });
    $("#productForm").validate({
        rules: {
            quantity: {
                required: true,
                digits: true
            },
            length: {
                required: false,
                minlength: 2
            }
        },
        messages: {
            quantity: "",
            length: ""
        }
    });
    $(".nutritionInfo").children(".tabTitle").on("click", function() {
        var e = $(this);
        var o = e.parent();
        o.find(".active").removeClass("active");
        o.find("." + e.data("tabtype")).addClass("active")
    });
    $("body.bodyProductPage .close-reveal-modal, body.bodyAccountPage .close-reveal-modal").on("click", function() {
        $("[data-reveal]").foundation("reveal", "close")
    });
    touchEvents($("#productImage"), {
        left: nextImage,
        right: previousImage
    });
    var r = kmo_wcs_pb$.getImagePathList();
    if ($(".productImage").children("img").attr("data-zoom-image") == r[0]) {
        $(".previousImageButton").addClass("hidden")
    }
    if ($(".productImage").children("img").attr("data-zoom-image") == r[r.length - 1]) {
        $(".nextImageButton").addClass("hidden")
    }
    if (checkDevice.isMobile()) {
        $("#thumbNailList").find(".overview > li > a").off("click").on("click", function() {
            $(".displayedImage").removeClass("displayedImage");
            $(this).addClass("displayedImage")
        })
    }
    $("#zoomImage").children(".close-reveal-modal").click(function() {
        $("#content").removeClass("overflowVis")
    });
    $(kmo_wcs_pb$.eventBus).on("kmo.refreshProductDescription.finish", registerSizeRecoEvent);
    $(kmo_wcs_pb$.eventBus).trigger("product.initialized")
}

function initializeZoom(e) {
    if (typeof e == "undefined") {
        e = ""
    }
    if ($(window).width() > breakpoint && !(checkDevice.isMobile() && $(".zoomMagnifier") != undefined)) {
        mobileZoom = false;
        initializeDesktopZoom(e)
    } else {
        mobileZoom = true;
        initializeMobileZoom(e)
    }
    $(".bodyProductPage").on("elevatezoom.finished", ".zoomContainer", function() {
        if (checkDevice.isMobile()) {
            $(this).addClass("mobile")
        }
        $(".bodyProductPage").off("elevatezoom.finished", ".zoomContainer")
    })
}

function addToCart(e) {
    if ($("#length").val() != undefined) {
        if ($("#length").val().length == 1) {
            popupMessage("selectLengthPopup", 5e3);
            return false
        }
        if ($("#length").val().length == 0) {
            popupMessage("enterLengthPopup", 5e3);
            return false
        }
    }
    if (isValidProductForm("#productForm")) {
        if (isValidItem()) {
            ajaxAddToCart(e, document.getElementById("productForm"));
            return true
        }
        if ($("#length").length && ($("#length").val() === "" || $("#length").val() % 1 !== 0)) {
            popupMessage("enterLengthPopup", 5e3)
        } else {
            popupMessage("selectItemPopup", 5e3)
        }
    }
    return false
}

function sizeRecoAddToCart(e, o) {
    docCookies.setItem("kmostore_variant_" + kmo_wcs_pb$.getProductId(), "Groessenempfehlung_angenommen");
    if ($(".singleSize").length) {
        if (o !== "" && $("#attrId").attr("type") !== "hidden") {
            changeSelectedProductAttribute("attrId", "" + o);
            deferredFunction = $.Deferred();
            $.when(deferredFunction).then(function() {
                $("#addToCartButton").click()
            })
        } else {
            $("#addToCartButton").click();
            return
        }
    } else {
        if (o !== "") {
            $("#attrId").attr("value", o)
        }
        if (e === "") {
            e = $(".productSizes").find(".selected").children(".sizeLabel").attr("id")
        }
        changeSelectedProductAttribute("size", "" + e);
        deferredFunction = $.Deferred();
        $.when(deferredFunction).then(function() {
            $("#addToCartButton").click()
        })
    }
}

function registerSizeRecoEvent() {
    $("#sizingRecommendation").find(".title").on("click", function() {
        var e = $(this);
        $(".sizingRecoWidth, .sizingRecoSize").slideToggle();
        if (e.hasClass("opened")) {
            e.removeClass("opened");
            docCookies.setItem("sreco", "0")
        } else {
            e.removeClass("closed");
            docCookies.setItem("sreco", "1")
        }
    })
}

function addToWishlist(e) {
    if (isValidProductForm("#productForm")) {
        if (isValidItem()) {
            ajaxAddToWishlist(e, document.getElementById("productForm"));
            return true
        }
        if ($("#length").length && ($("#length").val() === "" || $("#length").val() % 1 !== 0)) {
            popupMessage("enterLengthPopup", 5e3)
        } else {
            popupMessage("selectItemPopup", 5e3)
        }
    }
    return false
}

function isValidQuantity(e) {
    if ($("#quantityField").val() <= kmo_wcs_pb$.getMaxQuantity() && $("#quantityField").val() > 0) {
        return true
    } else {
        popupMessage("selectQuantityPopup", 5e3)
    }
    return false
}

function isValidLength() {
    if ($("#length").val() >= 100 || !$("#length").length) {
        return true
    } else {
        popupMessage("selectLengthPopup", 5e3);
        return false
    }
}

function isValidProductForm(e) {
    if ($(e).valid() && isValidQuantity(e) && isValidLength()) {
        return true
    }
}

function isValidQuantitybyClick(e, o, t) {
    if ($("#quantityField").val() > t && t > o && t > 0) {
        $("#quantityField").val(t)
    }
    if ($("#quantityField").val() < o && o < t && o > 0) {
        $("#quantityField").val(o)
    }
}

function isValidItem() {
    if ($("#catEntryId").val() == "" || $("#availability").length == 0 || $("#availability").hasClass("availability-2") || $("#availability").hasClass("availability-1") || $("#length").length && ($("#length").val() === "" || $("#length").val() % 1 !== 0)) {
        return false
    } else {
        return true
    }
}

function initializeDesktopZoom(e) {
    if (typeof e == "undefined") {
        e = ""
    }
    $("#productImage" + e).elevateZoom({
        zoomEnabled: true,
        zoomType: "window",
        gallery: "thumbNailList" + e,
        zoomWindowPosition: "zoomContainer" + e,
        lensColour: "transparent",
        cursor: "crosshair",
        galleryActiveClass: "displayedImage",
        scrollZoom: true,
        easing: true,
        responsive: true,
        lensOpacity: 1,
        easingAmount: 8,
        zoomWindowWidth: e != "" ? 210 : 484,
        zoomWindowHeight: e != "" ? 280 : 511,
        zoomWindowOffety: 4,
        zoomWindowFadeIn: 200,
        zoomWindowFadeOut: 200,
        lensFadeIn: 200,
        lensFadeOut: 200,
        loadingIcon: kmo_wcs_pb$.getImgDir() + "ajax-loader.gif"
    })
}

function initializeMobileZoom(e) {
    if ($(".zoomMagnifier") != undefined && typeof MoreJS == "undefined") {
        $(".zoomMagnifier").show();
        $(".zoomContainer").remove();
        $(".zoomWindowContainer").remove()
    } else {
        if (typeof e == "undefined") {
            e = ""
        }
    }
    $("#productImage" + e).elevateZoom({
        gallery: "thumbNailList" + e,
        zoomType: "none",
        lensSize: 200,
        zoomActivation: "click",
        cursor: "crosshair",
        galleryActiveClass: "displayedImage",
        scrollZoom: false,
        easing: true,
        easingAmount: 8,
        lensFadeIn: 200,
        lensFadeOut: 200,
        loadingIcon: kmo_wcs_pb$.getImgDir() + "ajax-loader.gif"
    })
}

function initializeCarousel(e) {
    if (typeof e == "undefined") {
        e = ""
    }
    var o = $("#thumbNailList" + e).jcarousel({
        vertical: true
    });
    $("#productThumbNails" + e + " .productThumbButton.prev").on("jcarouselcontrol:active", function() {
        $(this).removeClass("inactive")
    }).on("jcarouselcontrol:inactive", function() {
        $(this).addClass("inactive")
    }).jcarouselControl({
        target: "-=1",
        carousel: o
    });
    $("#productThumbNails" + e + " .productThumbButton.next").on("jcarouselcontrol:active", function() {
        $(this).removeClass("inactive")
    }).on("jcarouselcontrol:inactive", function() {
        $(this).addClass("inactive")
    }).jcarouselControl({
        target: "+=1",
        carousel: o
    });
    $(".displayedImage").ifExists(function() {
        $("#thumbNailList" + e).jcarousel("scrollIntoView", $(".displayedImage").attr("id").replace("imgLink", "") - 1)
    })
}

function initializeCrossSellCarousel() {
    if ($("#crossSellRecommendation").find(".jcarousel").attr("id") == "" && crossSellProducts.length > 0) {
        $("#crossSellRecommendation").easyResponsiveTabs({
            type: "default",
            width: "auto",
            fit: true,
            closed: false
        });
        var e = $("#crossSellRecommendation").find(".jcarousel");
        e.on("jcarousel:reload jcarousel:create", function(o) {
            var t;
            if (typeof prudsysRecommendation !== "undefined") {
                t = prudsysRecommendation.getElementWidth(e.innerWidth(), e.data["displaynumber"])
            } else {
                t = e.innerWidth()
            }
            if (t >= 600) {
                t = t / 4
            } else if (t >= 350) {
                t = t / 3
            } else {
                t = t / 2
            }
            e.jcarousel("items").css("width", t + "px");
            if (o.type == "jcarousel:create") {
                $(window).trigger("resize")
            }
        });
        var o = {};
        o.animation = "slow";
        if (e.data["center"]) {
            o.center = true;
            e.on("jcarousel:createend", function() {
                var o = Math.floor(e.jcarousel("items").size() / 2);
                var t = Math.floor(e.innerWidth() / prudsysRecommendation.getElementWidth(e.innerWidth(), e.data["displaynumber"]) / 2);
                var i;
                if (o < t) {
                    i = o
                } else {
                    i = t
                }
                $(this).jcarousel("scroll", i, false)
            })
        }
        e.jcarousel(o);
        $(".recoBoxButton.prev").on("jcarouselcontrol:active", function() {
            $(this).removeClass("inactive")
        }).on("jcarouselcontrol:inactive", function() {
            $(this).addClass("inactive")
        }).jcarouselControl({
            target: "-=1",
            carousel: e
        });
        $(".recoBoxButton.next").on("jcarouselcontrol:active", function() {
            $(this).removeClass("inactive")
        }).on("jcarouselcontrol:inactive", function() {
            $(this).addClass("inactive")
        }).jcarouselControl({
            target: "+=1",
            carousel: e
        })
    }
}

function changeSelectedProductAttribute(e, o) {
    $("." + e).toggleClass("selected", false);
    $("#" + o.replace(/\//g, "\\/")).toggleClass("selected", true);
    $("#" + e).val(unescapeValue(o)).trigger("change")
}

function unescapeValue(e) {
    var o = {
        t_t: "    ",
        s_s: " ",
        p_p: ".",
        c_c: ",",
        a_a: "&",
        q_q: "'",
        d_d: '"',
        l_l: "/",
        bo_bo: "(",
        bc_bc: ")",
        h_h: "ï¿½"
    };
    $.each(o, function(o, t) {
        var i = new RegExp(o, "g");
        e = e.replace(i, t)
    });
    return e
}

function changeSelectedProductAttributeForMultiplyProductPage(e, o, t) {
    $("." + e + "_" + t).toggleClass("selected", false);
    $("#" + o.replace(/\//g, "\\/") + "_" + t).toggleClass("selected", true);
    $("#" + e + "_" + t).val(o).trigger("change")
}

function changeSelectedColorForPicture(e, o) {
    var t = "colorPartNumbers";
    if (typeof o !== "undefined") {
        t = t + "_" + o
    }
    var i = window[t];
    if (i) {
        for (color in i) {
            for (var n = 0; n < e.length; n++) {
                if (e[n] == color) {
                    if (typeof kmo_wcs_pb$.getTwoForOne != "undefined") {
                        changeSelectedProductAttributeForMultiplyProductPage("color", i[color], o)
                    } else {
                        changeSelectedProductAttribute("color", i[color])
                    }
                    return true
                }
            }
        }
    }
}

function swapImageOfVariant() {
    variant.swapImage = true
}

function refreshProductDescription() {
    $("#loadingIndicator").show();
    var e = "#productForm";
    var o = {};
    o.storeId = kmo_wcs_pb$.getStoreId();
    o.langId = kmo_wcs_pb$.getLangId();
    o.catalogId = kmo_wcs_pb$.getCatalogId();
    o.productId = kmo_wcs_pb$.getProductId();
    if (typeof kmo_wcs_pb$.getQuickView != "undefined" && kmo_wcs_pb$.getQuickView()) {
        o.quickView = kmo_wcs_pb$.getQuickView()
    }
    if (typeof kmo_wcs_pb$.getChangeView != "undefined" && kmo_wcs_pb$.getChangeView()) {
        o.changeView = kmo_wcs_pb$.getChangeView();
        e = "#changeItemForm"
    }
    $.post("AjaxProductDescription?" + $(e).formSerialize(), o, function(e) {
        $("#productAjaxDescription").html($(e).children("#ajaxDescription").html());
        $("#longDescriptionText").html($(e).children("#ajaxLongDescription").html());
        $("#brandlogo").html($(e).children("#ajaxBrandLogo").html());
        $("#productId").html($(e).children("#ajaxProductId").html());
        $("#additionalInfo").html($(e).children("#ajaxAdditionalInfo").html());
        $("#attributeIcons").html($(e).children("#ajaxAttributeIcons").html());
        $("#loadingIndicator").hide();
        if ($("#countdown").length) {
            setIntervalAndExecute(runCountdown, 6e4)
        }
        var o = $(e).children("#ajaxPartNumber").html();
        if (variant.swapImage) {
            $(".carouselImageLink").each(function() {
                if ($(this).attr("data-image").indexOf(o + "F") > 0) {
                    $(this).trigger("click")
                } else if ($(this).attr("data-image").indexOf(o + "H") > 0) {
                    $(this).trigger("click")
                }
            });
            variant.swapImage = false
        }
        fitAnalyticsFunctions();
        if (typeof MoreJS != "undefined") {
            $(".sizeSelect").find(".disabled").attr("disabled", "")
        }
        if (typeof deferredFunction !== "undefined") {
            deferredFunction.resolve()
        }
        $(kmo_wcs_pb$.eventBus).trigger("kmo.refreshProductDescription.finish")
    })
}

function refreshProductDescription2For1(e, o) {
    if (!$(e).hasClass("disabled")) {
        $(e).addClass("disabled");
        var t = $("#longDescription_" + o);
        if (t.is(":empty")) {
            var i = {};
            i.storeId = kmo_wcs_pb$.getStoreId();
            i.langId = kmo_wcs_pb$.getLangId();
            i.catalogId = kmo_wcs_pb$.getCatalogId();
            i.productId = $("#productId_" + o).val();
            i.productPartNumber = $("#productPartNumber_" + o).val();
            if ($("#size_" + o).length > 0) {
                i.sizeId = $("#size_" + o).val()
            }
            if ($("#color_" + o).length > 0) {
                i.colorId = $("#color_" + o).val()
            }
            $.post("AjaxProductDescription", i, function(i) {
                var n = kmo_wcs_pb$.storeData.getProductDescriptionImages()[o];
                var a = $("<div id='descriptionImage_" + o + "' class='descriptionImage'><img width='156' height='208' src='" + n + "'></div>");
                var r = $("<div class='longDescriptionText'><table id='productAttributeTable_" + o + "' class='productAttributeTable'></table></div>");
                r.html($(i).find(".productAttributeTable"));
                var l = $("<ul class='resp-tabs-list'><li>" + kmo_wcs_pb$.storeData.getDescriptionLabel() + "</li><ul>");
                var s = $("<div class='resp-tabs-container'></div>");
                s.append(a);
                s.append(r);
                t.append(l);
                t.append(s);
                $("html, body").animate({
                    scrollTop: t.offset().top
                });
                $(e).removeClass("disabled")
            })
        } else {
            $("html, body").animate({
                scrollTop: t.offset().top
            });
            $(e).removeClass("disabled")
        }
    }
}

function fitAnalyticsFunctions() {
    if (fitAnalyticsOptions.addToCart) {
        $("#addToCartButton").click()
    } else if (fitAnalyticsOptions.showButton) {
        $("#open-fitAnalytics").css("display", "inline-block")
    }
    if (fitAnalyticsOptions.showRecommendation != "") {
        $("#open-fitAnalytics").hide();
        $(".recommendationFA").html(fitAnalyticsOptions.showRecommendation);
        $("#recommendation-fitAnalytics").css("display", "inline-block")
    }
    return false
}

function refreshProductDescriptionForMultiplyProductPage(e) {
    $("#loadingIndicator_" + e).show();
    var o = "#productForm";
    var t = {};
    var i = $("#Product2For1Form").serializeArray();
    p = "column=" + e + "&isAjaxCall=1";
    $.each(i, function(o, t) {
        if (t.name.match("_" + e + "$") == "_" + e) {
            p += "&" + t.name.substring(0, t.name.length - 2) + "=" + t.value
        }
    });
    if (typeof kmo_wcs_pb$.getQuickView != "undefined" && kmo_wcs_pb$.getQuickView()) {
        t.quickView = kmo_wcs_pb$.getQuickView()
    }
    if (typeof kmo_wcs_pb$.getChangeView != "undefined" && kmo_wcs_pb$.getChangeView()) {
        t.changeView = kmo_wcs_pb$.getChangeView();
        o = "#changeItemForm"
    }
    $.post("AjaxProduct2For1Description?" + p, t, function(o) {
        $("#productDescriptionContainer_" + e).html($(o).find("#productDescriptionContainer_" + e).html());
        $("#productName_" + e).html($(o).find("#productName_" + e).html());
        $("#productLongDescription_" + e).html($(o).find("#productLongDescription_" + e).html());
        $("#info_" + e).html($(o).find("#info").html());
        $("#availability_" + e).html($(o).find("#availability").html());
        $("#loadingIndicator_" + e).hide();
        if ($("#countdown").length) {
            setIntervalAndExecute(runCountdown, 6e4)
        }
    })
}

function previousImage() {
    if ($(".displayedImage").parents("li").prev().length == 1) {
        if ($(".displayedImage").parents("li").prev().prev().children("a").length == 0) {
            $(".previousImageButton").addClass("hidden")
        }
        $(".displayedImage").parents("li").prev().children("a").click();
        $(".nextImageButton.hidden").removeClass("hidden")
    }
}

function nextImage() {
    if ($(".displayedImage").parents("li").next().length == 1) {
        if ($(".displayedImage").parents("li").next().next().children("a").length == 0) {
            $(".nextImageButton").addClass("hidden")
        }
        $(".displayedImage").parents("li").next().children("a").click();
        $(".previousImageButton.hidden").removeClass("hidden")
    }
}

function swapImage(e, o) {
    if (typeof o == "undefined") {
        o = ""
    }
    var t = "imgLink" + o + "1";
    var i = o == "" ? carouselImagePartNumbers : carouselImagePartNumbers[o.charAt(1)];
    for (image in i) {
        if ($.inArray(e, i[image]) >= 0) {
            t = image
        }
    }
    var n = $("#" + t);
    if (n.length && !n.hasClass("displayedImage")) {
        if (n.data("zoom-image")) {
            zoomImagePre = n.data("zoom-image")
        } else {
            zoomImagePre = n.data("image")
        }
        $("#productImage" + o).data("elevateZoom").swaptheimage(n.data("image"), zoomImagePre);
        $(".carouselImageLink").removeClass("displayedImage");
        n.addClass("displayedImage");
        $("#thumbNailList" + o).jcarousel("scrollIntoView", n.attr("id").replace("imgLink", "") - 1)
    }
}

function swapOrderItem(e) {
    if (isValidProductForm("#changeItemForm")) {
        $.post("/AjaxOrderItemDelete?", e, function(e) {
            $("#changeItemForm").submit()
        })
    }
}

function swapInterestItem(e) {
    $.post("/AjaxInterestItemDelete?", e, function(e) {
        $("#changeItemForm").append('<input type="hidden" name="leafletScrollAmount" value="' + $(window).scrollTop() + '">');
        $("#changeItemForm").submit()
    })
}
$(".bodyProductPage").on("click", ".nextZoomImageButton", function() {
    var e = kmo_wcs_pb$.getImagePathList();
    $("#zoomImage").children("img").attr("src", e[e.indexOf($("#zoomImage").children("img").attr("src")) + 1]);
    if (e[e.indexOf($("#zoomImage").children("img").attr("src")) + 1] == undefined) {
        $(".nextZoomImageButton").addClass("hidden")
    }
    $(".previousZoomImageButton.hidden").removeClass("hidden")
});
$(".bodyProductPage").on("click", ".previousZoomImageButton", function() {
    var e = kmo_wcs_pb$.getImagePathList();
    $("#zoomImage").children("img").attr("src", e[e.indexOf($("#zoomImage").children("img").attr("src")) - 1]);
    if (e[e.indexOf($("#zoomImage").children("img").attr("src")) - 1] == undefined) {
        $(".previousZoomImageButton").addClass("hidden")
    }
    $(".nextZoomImageButton.hidden").removeClass("hidden")
});
$("body.bodyProductPage").on("click", ".zoomMagnifier_close", function() {
    window.scrollTo($("#productImage").offset().top, 0)
});
var mobileZoomSettings = {
    matrixRegex: /matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/,
    counter: 1
};
var openMobileZoom = function() {
    var e = kmo_wcs_pb$.getImagePathList();
    var o = $("#zoomImage");
    var t = $("#zoomImage").children("img");
    o.children("img").attr("src", $(".displayedImage").attr("data-zoom-image"));
    o.foundation("reveal", "open");
    if (e.indexOf(t.attr("src")) == e.length - 1) {
        $(".nextZoomImageButton").addClass("hidden")
    } else {
        $(".nextZoomImageButton").removeClass("hidden")
    }
    if (e.indexOf(t.attr("src")) == 0) {
        $(".previousZoomImageButton").addClass("hidden")
    } else {
        $(".previousZoomImageButton").removeClass("hidden")
    }
    if (typeof MoreJS == "undefined") {
        var i = $(window).scrollTop() - $(".productImage").offset().top;
        var n = -o.parents(".productImage").offset().left;
        o.attr("style", "top: " + i + "px !important; left: " + n + "px; width: " + $(window).width() + "px;");
        $("#content").addClass("overflowVis")
    }
    if (typeof MoreJS != "undefined") {
        setTimeout(function() {
            var e = /matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/;
            var i = t.css("-webkit-transform").match(e);
            var n = i[1];
            var a = t.height();
            var r = t.width();
            t.css({
                top: a * Math.pow(.9, n) * n - a,
                left: r * Math.pow(.9, n) * n - r
            });
            o.animate({
                scrollLeft: (t.width() * n - o.width()) / 2,
                scrollTop: (t.height() * n - o.height()) / 2
            }, 1e3)
        }, 500)
    }
};
$("body.bodyProductPage").on("click", ".plusZoomButton", function() {
    if (mobileZoomSettings.counter < 6) {
        mobileZoomSettings.counter = mobileZoomSettings.counter + 1;
        $("#zoomImage").children("img").css({
            "-webkit-transform": "scale(" + mobileZoomSettings.counter + ")",
            "-moz-transform": "scale(" + mobileZoomSettings.counter + ")",
            "-ms-transform": "scale(" + mobileZoomSettings.counter + ")",
            "-transform": "scale(" + mobileZoomSettings.counter + ")",
            top: $("#zoomImage").children("img").height() * Math.pow(.9, mobileZoomSettings.counter) * mobileZoomSettings.counter - $("#zoomImage").children("img").height(),
            left: $("#zoomImage").children("img").width() * Math.pow(.9, mobileZoomSettings.counter) * mobileZoomSettings.counter - $("#zoomImage").children("img").width()
        });
        $("#zoomImage").scrollTop(($("#zoomImage").children("img").height() * 1.11 * mobileZoomSettings.counter - $("#zoomImage").height()) / 2);
        $("#zoomImage").scrollLeft(($("#zoomImage").children("img").width() * 1.11 * mobileZoomSettings.counter - $("#zoomImage").width()) / 2)
    }
});
$("body.bodyProductPage").on("click", ".minusZoomButton", function() {
    if (mobileZoomSettings.counter > 1) {
        mobileZoomSettings.counter = mobileZoomSettings.counter - 1;
        if (mobileZoomSettings.counter == 1) {
            $("#zoomImage").children("img").css({
                "-webkit-transform": "scale(" + mobileZoomSettings.counter + ")",
                "-moz-transform": "scale(" + mobileZoomSettings.counter + ")",
                "-ms-transform": "scale(" + mobileZoomSettings.counter + ")",
                "-transform": "scale(" + mobileZoomSettings.counter + ")",
                top: 0,
                left: 0
            })
        } else {
            $("#zoomImage").children("img").css({
                "-webkit-transform": "scale(" + mobileZoomSettings.counter + ")",
                "-moz-transform": "scale(" + mobileZoomSettings.counter + ")",
                "-ms-transform": "scale(" + mobileZoomSettings.counter + ")",
                "-transform": "scale(" + mobileZoomSettings.counter + ")",
                top: $("#zoomImage").children("img").height() * Math.pow(.9, mobileZoomSettings.counter) * mobileZoomSettings.counter - $("#zoomImage").children("img").height(),
                left: $("#zoomImage").children("img").width() * Math.pow(.9, mobileZoomSettings.counter) * mobileZoomSettings.counter - $("#zoomImage").children("img").width()
            });
            $("#zoomImage").scrollTop(($("#zoomImage").children("img").height() * 1.11 * mobileZoomSettings.counter - $("#zoomImage").height()) / 2);
            $("#zoomImage").scrollLeft(($("#zoomImage").children("img").width() * 1.11 * mobileZoomSettings.counter - $("#zoomImage").width()) / 2)
        }
    }
});
var hoverTimeout;
$("#thumbNailList").on("mouseout", ".carouselImageLink", function() {
    hoverTimeout = setTimeout(function() {
        $("#productImage").attr("src", $(".displayedImage").data("image"))
    }, 300)
}).on("click", ".carouselImageLink", function() {
    $("#productImage").attr("src", $(this).data("image"))
});
(function() {
    var e = false;

    function o() {
        if ($("#partNumbers").length > 0 && $("#partNumbers") != undefined) {
            e = true;
            var o = $("#partNumbers").html().trim();
            var t = $("#productId").html();
            if (t != undefined && o != undefined && o != "") {
                var i = o.split(",");
                var n;
                if (t != undefined || t != "") {
                    for (n in i) {
                        if (t.indexOf(i[n]) > -1) {
                            $(".right").show();
                            return true
                        }
                    }
                }
            }
            $(".right").hide();
            return false
        }
    }
    o();
    if (e) {
        $(kmo_wcs_pb$.eventBus).on("kmo.refreshProductDescription.finish", function() {
            o()
        })
    }
})();
if (typeof $ != "undefined") {
    $(document).safeReady(initializeProductPage)
}

function setMinLength() {
    var e = $("#productForm").find("#minLength").val();
    if (e != "") {
        if ($(".productOption").find("#length").length > 0 && $(".productOption").find("#length").val() < parseInt($("#productForm").find("#minLength").val())) {
            $(".productOption").find("#length").val($("#productForm").find("#minLength").val())
        }
    }
}
